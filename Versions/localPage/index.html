<html>

<head>
    <meta charset="UTF-8">
    <title>Storm Impact Demo</title>

    <!-- LIBRARIES -->
    <script src="lib/d3/v3/d3.v3.min.js"></script>
    <!-- /LIBRARIES-->

    <!-- PAGE -->
    <link rel="stylesheet" href="bootstrap-4.1.3-dist/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="navbar/navbar.css" type="text/css" />
    <!-- /PAGE -->

    <!-- MAP -->
    <!-- Stylesheets -->
    <link rel="stylesheet" href="leaflet/leaflet.css" />
    <link rel="stylesheet" href="baseMap/baseMap.css" />
    <!-- Scripts -->
    <script src="leaflet/leaflet.js"></script>
    <script src="baseMap/baseMap.js"></script>
    <script src="us-states.js"></script>
    <!-- /MAP -->

    <!-- DATA MODULE -->
    <!-- Stylesheets -->
    <!-- <link rel="stylesheet" href="graph/data_module_style.css"/> -->
    <!-- /Stylesheets-->
    <!-- Scripts -->
    <!-- <script src="graph/data_module.js"></script> -->
    <!-- /Scripts -->
    <!-- /DATA MODULE -->

    <!-- TABLE -->
    <!-- Stylesheets -->
    <link rel="stylesheet" type="text/css" href="table/tableResources/css/jquery.dataTables.min.css">
    <!-- Scripts -->
    <!-- <script src="table/tableResources/d3.v3.min.js"></script> -->
    <script src="table/tableResources/jquery.min.js"></script>
    <script src="table/tableResources/jquery.dataTables.min.js"></script>
    <script src="table/tableArray.js"></script>
    <script src="table/makeTable.js"></script>
    <!-- /TABLE -->
</head>

<body>
    <!-- STORM IMPACT NAVBAR -->
    <nav class="navbar navbar-light navbar-expand-lg fixed-top">
        <a class="navbar-brand" href="#"><span class="light">Storm</span>Impact<span style="color:#d22f27">AEPOHIO</span></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Dashboard <span class="badge badge-secondary">BETA</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">About</a>
                </li>
                <li>
                    <a class="nav-link" href="$">Contact Us</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Hello user!</a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="#">Dashboard</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">Log Out</a>
                    </div>
                </li>
            </ul>
        </div>
    </nav>
    <!-- /STORM IMPACT NAVBAR -->

    <!-- STORM IMPACT TOOLBAR -->
    <div id="app-toolbar">
        <form action="" onsubmit="return false;" method="post">
            <div class="row tools">
                <div class="col-sm-2">
                    <div class="tool timeframe">
                        <input type="date" id="timeframe-end" class="form-control" placeholder="mm/dd/yyyy">
                    </div>
                </div>
                <div class="col-sm-2 col-sm-offset-8">
                    <div class="tool">
                        <button id="btnRefresh" class="btn btn-primary btn-block" style="background-color:#d22f27;border:none">Refresh</button>
                    </div>
                </div>
                <div class="col-sm-2">
                    <div class="tool">
                        <button id="btnToggleGrid" class="btn btn-primary btn-block" style="background-color:#d22f27;border:none" onclick="createTableWindow()">Data Table</button>
                    </div>
                </div>
                <div class="col-sm-1">
                    <div class="tool">
                        <button id="btnChangeVar" class="btn btn-primary btn-block" style="background-color:#d22f27;border:none" onclick="nextVariable()">Next Variable</button>
                    </div>
                </div>
                <div class="col-sm-3"></div>
                <div class="col-sm-1">
                    <div class="tool">
                        <button id="btnPDF" class="btn btn-primary btn-block" style="background-color:#d22f27;border:none" onclick="downloadPDF()">PDF</button>
                    </div>
                </div>
                <div class="col-sm-1">
                    <div class="tool">
                        <button id="btnCSV" class="btn btn-primary btn-block" style="background-color:#d22f27;border:none" onclick="downloadCSV()">CSV</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <!-- /STORM IMPACT TOOLBAR -->

    
    <div class="container">
        <!-- MAP -->
        <div id="map" class="flex-item"></div>
        <!-- /MAP -->

        <!-- DATA MODULE -->
        <img src="graph/graphImage.png" class="fixed">
        <!-- /DATA MODULE-->
    </div>

    <!-- TABLE WINDOW -->
    <script>
        // Popup window code
        function createTableWindow() {
            var tableWindow = window.open("table/table2.html", tableWindow, "width = 600,height=500");
            popupWindow = window.open(
                url,'popUpWindow','height=300,width=400,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes')
        }
    </script>
    <!-- /TABLE WINDOW -->

    <!-- TABLE -->
    <p id="demo"></p>
    <div id='highlighted'>Nothing Highlighted</div>
    <div id='selected'>Nothing Selected</div>
    <div id='container'></div>
  
    <script>
    var table_plot = makeTable()
      .datum(storm_data)
      .sortBy('Grid_ID', true)
      .filterCols(['col', 'x', 'y']);
  
    d3.select('#container').call(table_plot);
  
    table_plot.on('highlight', function(data, on_off){
      if(on_off){//if the data is highlighted
        d3.select('#highlighted').text(
          'Hovering over cell ' + data.Grid_ID
        );
        var parent = table_plot.opener;
      }
    });
    table_plot.on('select', function(data, on_off){
      if(on_off){//if the data is highlighted
        d3.select('#selected').text(
          data.Grid_ID + ' added to selection'
        );
      }
    });
    </script>
    <!-- /TABLE -->

    <!-- CSV WINDOW -->
    <script>
            // Popup window code
            function downloadCSV() {
                var tableWindow = window.open("data/AEPData.csv", tableWindow, "width = 600,height=500");
                csvWindow = window.open(
                    url,'csvWindow','height=100,width=100,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes')
                csvWindow.close();
            }
    </script>
    <!-- /CSV WINDOW -->

    <!-- PDF WINDOW -->
    <script>
            // Popup window code
            function downloadPDF() {
                var tableWindow = window.open("data/AEPData.pdf", tableWindow, "width = 600,height=500");
                pdfWindow = window.open(
                    url,'pdfWindow','height=100,width=100,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes')
                pdfWindow.close();
            }
    </script>
    <!-- /PDF WINDOW -->
</body>

</html>